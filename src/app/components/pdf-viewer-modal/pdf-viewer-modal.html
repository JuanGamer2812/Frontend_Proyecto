<!-- Modal Backdrop -->
<div class="pdf-modal-backdrop" *ngIf="isVisible" (click)="onClose()"></div>

<!-- Modal -->
<div class="pdf-modal" *ngIf="isVisible" (click)="$event.stopPropagation()">
    <div class="pdf-modal-content">
        <!-- Header -->
        <div class="pdf-modal-header">
            <h5 class="mb-0">
                <i class="bi bi-file-earmark-pdf me-2"></i>{{ fileName }}
            </h5>
            <button type="button" class="btn-close" (click)="onClose()"></button>
        </div>

        <!-- Body -->
        <div class="pdf-modal-body">
            <div *ngIf="loading" class="d-flex align-items-center justify-content-center" style="height:100%">
                <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Cargando...</span></div>
            </div>
            <ng-container *ngIf="!loading">
                <img *ngIf="isImage && safeUrl" [src]="safeUrl" alt="Imagen" style="max-width:100%;height:auto;display:block;margin:0 auto;" />
                <iframe *ngIf="!isImage && safeUrl" [src]="safeUrl" type="application/pdf" class="pdf-iframe"></iframe>
                <div *ngIf="!safeUrl && !loading" class="text-center text-muted">No se puede mostrar el archivo en vista previa.</div>
            </ng-container>
        </div>

        <!-- Footer -->
        <div class="pdf-modal-footer">
            <button type="button" class="btn btn-secondary" (click)="onClose()">
                <i class="bi bi-x-lg me-2"></i>Cerrar
            </button>
            <button type="button" class="btn btn-primary" (click)="descargarPdf()">
                <i class="bi bi-download me-2"></i>Descargar CV
            </button>
        </div>
    </div>
</div>